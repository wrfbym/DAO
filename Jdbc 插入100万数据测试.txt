import org.junit.*;
import java.sql.*;
import java.util.*;


public class test{


private String url = "jdbc:mysql://localhost:3306/sd?useSSL=false&serverTimezone=UTC";
private String user = "root";
private String password = "root";
@Test

public void Test(){
        Connection conn = null;
        PreparedStatement pstm =null;
        ResultSet rt = null;
        try {
        Class.forName("com.mysql.cj.jdbc.Driver");
        conn = DriverManager.getConnection(url, user, password);
        String sql = "INSERT INTO userinfo(uname) VALUES(CONCAT('姓名',?))";
                pstm = conn.prepareStatement(sql);
                conn.setAutoCommit(false);
                Long startTime = System.currentTimeMillis();
                Random rand = new Random();
                int a,b,c,d;
                for (int i = 1; i <= 1000000; i++) {
                        pstm.setInt(1, i);
                        pstm.addBatch();
                if(i%100000==0){//可以设置不同的大小；如50，100，500，1000等等
                        pstm.executeBatch();
                        conn.commit();
                        pstm.clearBatch();
                }
                }//每1000次提交一次

                Long endTime = System.currentTimeMillis();
                System.out.println("OK,用时：" + (endTime - startTime));
        } catch (Exception e) {
                e.printStackTrace();
                throw new RuntimeException(e);
        }finally{
                if(pstm!=null){
                        try {
                                pstm.close();
                        } catch (SQLException e) {
                                e.printStackTrace();
                                throw new RuntimeException(e);
                        }
                }
                if(conn!=null){
                        try {
                                conn.close();
                        } catch (SQLException e) {
                                e.printStackTrace();
                                throw new RuntimeException(e);
                                }
                        }
                }
        }
}